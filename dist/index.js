(()=>{"use strict";var e,t=(e=document.querySelectorAll(".keyboard__key"),Array.from(e).map((function(e){return e.className.split(" ")[2]}))),c=document.querySelector(".textarea"),n=["AltLeft","AltRight","Backspace","CapsLock","ControlLeft","ControlRight","Delete","Enter","ShiftLeft","ShiftRight","Tab","MetaLeft"],s=document.activeElement.closest("textarea"),r=!1;function a(e){var s=e.currentTarget.className.split(" ")[2];if("Backspace"!==s&&"Delete"!==s)if("Tab"!==s)if("CapsLock"!==s)if("Enter"!==s){if(t.includes(s)&&!n.includes(s)){if(e.currentTarget.classList.contains("Space"))return void l(" ");var r=c.selectionStart;l(e.target.innerText),c.selectionStart=r+1,e.preventDefault()}}else l("\n");else d();else l("\t");else!function(e){var t=c.value,n=c.selectionStart,s=c.selectionEnd;if(0===n)return;"Backspace"===e?(c.value=t.slice(0,n-1)+t.slice(s),c.setSelectionRange(n-1,n-1)):"Delete"===e&&(c.value=t.slice(0,n)+t.slice(s+1),c.setSelectionRange(n,n));c.focus()}(s)}function o(e){var t=e.currentTarget.classList;(t.contains("ShiftLeft")||t.contains("ShiftRight"))&&u("shift"),e.currentTarget.classList.add("pressed")}function i(e){var t=e.currentTarget.classList;e.currentTarget.classList.remove("pressed"),(t.contains("ShiftLeft")||t.contains("ShiftRight"))&&u(r?"caps":"lower-case")}function l(e){var t=c.value,n=c.selectionStart,s=c.selectionEnd;c.value=t.slice(0,n)+e+t.slice(s),c.setSelectionRange(n+1,n+1),c.focus()}function d(){var e=document.querySelector(".key.CapsLock");(r=!r)?(e.classList.add("pressed"),u("caps")):(e.classList.remove("pressed"),u("lower-case"))}function u(e){document.querySelectorAll(".value").forEach((function(t){t.classList.contains("".concat(e))?t.classList.remove("hidden"):t.classList.add("hidden")}))}var f=document.querySelectorAll(".key");document.documentElement.addEventListener("keydown",(function(e){if(!s){var c={ArrowUp:"▲",ArrowDown:"▼",ArrowLeft:"◄",ArrowRight:"►"};if("Tab"===e.code&&(l("\t"),e.preventDefault()),"CapsLock"===e.code)return d(),void e.preventDefault();if("Enter"===e.code&&(l("\n"),e.preventDefault()),t.includes(e.code)&&!n.includes(e.code)&&!Object.keys(c).includes(e.code))return l(e.key),void e.preventDefault();if(Object.keys(c).includes(e.code))return l(c[e.code]),void e.preventDefault()}})),document.documentElement.addEventListener("keydown",(function(e){var t=document.querySelector(".".concat(e.code));"CapsLock"!==e.code&&("ShiftLeft"!==e.code&&"ShiftRight"!==e.code||(u("shift"),t.classList.add("pressed")),t&&t.classList.add("pressed"))})),document.documentElement.addEventListener("keyup",(function(e){var t=document.querySelector(".".concat(e.code));"CapsLock"!==e.code&&("ShiftLeft"!==e.code&&"ShiftRight"!==e.code||u(r?"caps":"lower-case"),t&&t.classList.remove("pressed"))})),f.forEach((function(e){e.addEventListener("click",a),e.addEventListener("mousedown",o),e.addEventListener("mouseup",i)}))})();